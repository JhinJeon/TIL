# 사전적 정의

- 프로그램 : 어떤 작업을 위해 실행할 수 있는 파일
- 프로세스 : 
    - 컴퓨터에서 연속적으로 실행되고 있는 **프로그램**
    - 메모리에 올라와 실행되고 있는 프로그램의 인스턴스(개체)
    - OS로부터 시스템 자원(CPU 시간, 주소, 메모리 영역 등)을 할당받는 단위

- 스레드 : 
    - **프로세스** 내에서 실행되는 여러 흐름의 단위
    - 프로세스의 특정한 수행 경로
    - 프로세스가 할당받은 자원을 이용하는 실행 단위
    - 모든 프로세스는 하나 이상의 스레드가 실행되고 있다.
    - 한 프로세스가 두 개 이상의 스레드를 갖고 있으면 *멀티스레드 프로세스*라고 한다.

# 스레드의 우선순위

- 스레드 별로 대기 상황에 실행 순위를 다르게 설정할 수 있다.
- 우선 순위 값은 스레드 간 관계를 잘 파악하고 사용해야 한다.
- 일반적으로는 기본값 사용이 권장된다.

# 스레드의 생애 주기(Lifecycle)

1. 생성(new)

- 스레드 객체가 생성된 상태
- 아직 실행 및 대기 상태는 아니다.
- start() 메서드 호출 시 실행 가능(runnable) 상태로 돌입

2. 실행 가능(runnable)

- 실행 대기 중인 상태
- 스레드 스케쥴러에 의해 언제든지 실행 상태로 바뀔 수 있다.

3. 실행 중(running)

- 프로세스 내에서 실행 중인 상태
- 스레드 스케쥴러는 runnable 스레드 중 우선 순위가 높은 스레드를 선택해 실행한다.
- 같은 프로세스 내에 있는 스레드들은 순차적으로 실행된다.
- 각 스레드에는 자신의 정보를 담고 있다(프로그램 카운터, 스택 등).

4. 일시정지(blocked)

- 사용하고자 하는 객체의 락(lock)이 풀릴 때까지 기다리는 상태
- 특정 이유로 인해 실행 중인 스레드가 일시정지 상태로 돌입한다.
- sleep(), join() 메서드는 호출한 스레드를 blocked 상태로 만든다.

5. 대기(waiting)

- 다른 스레드가 통지할 때까지 기다리는 상태

6. 일시 대기(timed waiting)

- 설정된 시간 동안 기다리는 상태
- 설정한 시간이 지나면 runnable 상태로 돌입한다.

7. 종료(terminated, dead)

- 스레드가 종료된 상태
- run 메서드 완료 시 스레드가 종료되면 해당 스레드는 다시 시작할 수 없다.
    - 이 경우 새로운 스레드를 생성하여 실행시켜야 한다.

# 스레드 구현(C)

- 스레드를 사용하려면 process.h를 불러와야 한다.

```c
#include <process.h>
#include <stdio.h>
#include <stdlib.h>

void CharProc(void *p)
{
    char ch = (char)p;
    for (auto i = 0; i < 100; i++)
        printf("%c", ch);
}

int main()
{
    for (auto i = 0; i < 10; i++)
        _beginthread(CharProc, 0, (void*)(rand()%26+'A'));
    getchar();
    return 0;
}
```