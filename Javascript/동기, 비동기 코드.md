## 1. 콜스택과 실행 컨텍스트

```js
const foo = function() {
    console.log("foo")
}

const bar = function () {
    console.log("bar")
}

foo()   // call stack에 foo, console.log() 가 추가된 뒤 console.log(), foo 순으로 pop
bar()   // call stack에 bar, console.log() 가 추가된 뒤 console.log(), bar 순으로 pop
// 전역 객체(window) pop, 프로그램 종료
```

## 2. 동기와 비동기

```js
console.log("첫 번째")
setTimeout(() => console.log("두 번째"), 2000)
console.log("세 번째")
// 1. 첫 번째 처리(로그 출력)
// 2. 두 번째 처리(Web API에 정보 보내기)
// 3. Web API에서 setTimeout()에 입력한 시간만큼 타이머 설정
// 4. 세 번째 처리(로그 출력)
// 5. 전역 변수 pop
// 6. 두 번째 처리(로그 출력)
```

## 3. 동기, 비동기 컨텍스트 종합

```js
function sleep(sec) {
    const delayUntil = Date.now() + sec
    while (Date.now() < delayUntil) []
}

for (let i = 1; i <= 10; i++) {
    console.log(`${i}번째 반복`)
    sleep(1000)
}

setTimeout(function () {
    console.log("5초 뒤 실행!!")
}, 5000)
```

## 4. 프로미스

```js
// url은 URL 주소를 저장한 변수명
const get = function (url) {
    return new Promise(function (resolve, reject) {
        const xhr = new XMLHttpRequest()
        xhr.open("GET", url)
        xhr.send()

        xhr.onload = () => {
            // if : 정상 코드(then)
            if (xhr.status == 200) {
                resolve(JSON.parse(xhr.response))
            // else : 에러 코드(catch)
            } else {
                reject(new Error(xhr.status))
            }
        }
    })
}
```
### 추가 : 체이닝

- 앞에 .을 입력하여 위에 작성한 코드 변수와 이어지도록 할 수 있다.
- 비동기적으로 동작하는 코드를 동기적으로 동작하게 만들 수 있다.

```js
get(`${url}/posts/1`)
  .then((response) => {
    const userId = response.userId
    return userId
  })
  .then((userId) => {
    return get(`${url}/users/${userId}`)
  })
  .then((response) => {
    console.log(response)
  })
  .catch((error) => {
    console.log(error)
  })
```

## 5. axios

- promise 기반의 비동기 요청/응답 코드를 보다 쉽게 구현할 수 있다.

```js
axios.get(`${url}/posts/1`)     // XMLHttpRequests 생성, promise API 지원
  .then((response) => {
    const.userId = response.data.userId     // data만 가져와야 한다(response.userId가 아님)
    return userId
  })
  .then((userId) => {
    return axios.get(`${url}/users/${userId}`)
  })
  .then((response) => {
    console.log(response.data)
  })
  .catch((error) => {
    console.log(error)
  })
```