# 리눅스 파일 사용 권한

- 리눅스 파일 사용 권한은 읽기(r), 쓰기(w), 실행(x)가 있다.
- 파일 사용 권한은 사용자 그룹마다 다르게 설정할 수 있다.
    - 사용자 그룹은 소유자(User), 그룹(Group), 그 외 사용자(Oher)로 구분된다.

# chmod 명령어

- 파일의 모드(사용자 그룹 별 권한 설정값)을 변경하는 명령어다.
- chmod {선택옵션} {모드값} \[대상파일 또는 디렉토리] 순으로 입력한다.

## 파라미터 문자열 조합

### 선택 옵션

- v : 모든 파일에 대해 모드가 적용되는 진단(diagnostic) 메시지 출력.
- f : 에러 메시지 출력하지 않음.
- c : 기존 파일 모드가 변경되는 경우만 진단(diagnostic) 메시지 출력.
- R : 지정한 모드를 파일과 디렉토리에 대해 재귀적으로(recursively) 적용.

### 모드 값(조합 가능한 문자열 모음)

- u,g,o,a : 소유자(u), 그룹(g), 그 외 사용자(o), 모든 사용자(a) 지정.
- +,-,=   : 현재 모드에 권한 추가(+), 현재 모드에서 권한 제거(-), 현재 모드로 권한 지정(=)
- r,w,x   : 읽기 권한(r), 쓰기 권한(w), 실행 권한(x)
    - 디렉토리에 실행 권한을 부여하면 디렉토리 내 모든 파일의 정보(ls -l)를 확인할 수 있다.
    - 디렉토리에 실행 권한이 없으면 읽기 및 쓰기 권한이 제한될 수 있다.

- X       : "디렉토리" 또는 "실행 권한(x)이 있는 파일"에 실행 권한(x) 적용.
- s       : 실행 시 사용자 또는 그룹 ID 지정(s). "setuid", "setgid".
- t       : 공유모드에서의 제한된 삭제 플래그를 나타내는 sticky(t) bit.
- 0~7     : 8진수(octet) 형식 모드 설정 값.

## 문자열 조합 예시

- 파일 filename 소유자에게 읽고 쓸 수 있는 권한 지정

```
chmod u=rw filename
```

- 현재 속한 그룹에게 groupfile 파일을 실행할 수 있는 권한 추가

```
chmod g+x groupfile
```

- 그룹 외 사용자에게 limitedfile에 대한 모든 권한(읽기, 쓰기, 실행) 제거

```
chmod o-rwx limitedfile
```

- 소유자와 그룹 내 사용자들에게 readme에 대한 읽기 권한 지정

```
chmod ug=r readme
```

## 문자열 조합 대신 8진수 쓰기

- r=4, w=2, x=1로 대입하여 합산하면 된다.
    - 예) 읽기와 실행 권한만 부여하려면 5(4+1)

- 3자리로 구성된 8진수를 입력하면 자동으로 \[소유자, 그룹, 기타] 순으로 사용자 권한이 맵핑된다.

> 예) 소유자에게 모든 권한, 그룹 내 사용자에게는 읽기 및 실행 권한만, 외부 사용자에게는 읽기 권한만 부여
>
>```
>chmod 754 thenewfile
>```

# 기존 파일의 권한 확인

- ls -l을 입력하면 파일에 부여된 권한을 조회할 수 있다.
- ls -l 실행 결과는 \[파일 권한] - \[파일 소유자명] - \[파일 소유 그룹명] - \[생성 시각] 순으로 표시된다.

```linux
-rw-r--r-- 1 ppotta manager 17 Mar 24 03:17 
```